# VPSプロバイダー側のファイアウォール設定確認

## 重要：サーバー側の設定は正常です

サーバー側の診断結果：
- ✅ Viteサーバー: 正常に起動中（ポート5173）
- ✅ ファイアウォール（ufw）: ポート5173開放済み
- ✅ リッスン設定: 0.0.0.0でリッスン中（外部アクセス可能）

## 外部からアクセスできない原因

**VPSプロバイダー側のセキュリティグループ/ファイアウォール設定**でポート5173がブロックされている可能性が高いです。

## 確認手順（主要VPSプロバイダー）

### さくらのVPS / さくらのクラウド
1. さくらのクラウドコントロールパネルにログイン
2. 「ファイアウォール」または「セキュリティグループ」を開く
3. 該当サーバーのファイアウォール設定を確認
4. ポート5173（TCP）を追加して保存

### AWS EC2
1. AWSコンソールにログイン
2. EC2 → セキュリティグループを選択
3. インバウンドルールを編集
4. カスタムTCP、ポート5173、ソース0.0.0.0/0を追加

### Google Cloud Platform (GCP)
1. GCPコンソールにログイン
2. VPCネットワーク → ファイアウォールルール
3. 新しいルールを作成
4. ポート5173（TCP）を許可

### Azure
1. Azureポータルにログイン
2. 仮想マシン → ネットワーク
3. インバウンドポートの規則を追加
4. ポート5173を追加

### その他のVPSプロバイダー
- 管理画面で「ファイアウォール」「セキュリティグループ」「ネットワーク設定」などを確認
- ポート5173（TCP）を開放

## 一時的な解決策：既存のポートを使用

もしポート5173が開放できない場合、既に開放されているポートを使用できます：

```bash
# vite.config.jsのportを変更
port: 8081  # 既に開放されているポート
```

## 確認方法

外部からポートが開放されているか確認：

1. **オンラインツールを使用**:
   - https://www.yougetsignal.com/tools/open-ports/
   - IP: 160.251.170.253
   - ポート: 5173

2. **別のマシンからテスト**:
   ```bash
   curl -v http://160.251.170.253:5173
   ```

## 現在のサーバー状態

```bash
# サーバー側の状態確認
cd /opt/libertycall
./test_connection.sh
```

すべて正常であれば、VPSプロバイダー側の設定を確認してください。

